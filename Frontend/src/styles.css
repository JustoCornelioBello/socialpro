:root{
  --nav-h: 64px;
  --bg: #000;
  --panel: #10141a;
  --card: #141a22;
  --muted: #97a3b6;
  --text: #e8eef7;
  --brand: #6aa7ff;
  --primary: #4f8cff;
  --border: #243040;
  --gap: 16px;
}

/* Reset básico */
*{ box-sizing: border-box; }
html, body, #root { height: 100%; }
body{
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* NAVBAR */
.topnav{
  position: fixed;
  top: 0; left: 0; right: 0;
  height: var(--nav-h);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
  z-index: 1000;
}
.topnav-inner{
  height: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 16px;
  display: grid;
  grid-template-columns: 1fr minmax(320px, 560px) 1fr;
  align-items: center;
  gap: 12px;
}
.brand{
  display: inline-flex; align-items: center; gap: 8px;
  text-decoration: none; color: var(--text); font-weight: 700;
}
.brand-dot{
  width: 10px; height: 10px; border-radius: 50%;
  background: linear-gradient(135deg, var(--brand), #a6d0ff);
  box-shadow: 0 0 12px rgba(106,167,255,0.7);
}

/* Search */
.search-wrap{
  position: relative;
  display: flex; align-items: center;
  background: #0e141b;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 8px 12px 8px 36px;
}
.search-icon{
  position: absolute; left: 12px; font-size: 14px; opacity: 0.8;
}
.search-input{
  width: 100%; background: transparent; border: 0; outline: 0;
  color: var(--text); font-size: 14px;
}

/* Acciones rápidas */
.quick-actions{
  display: flex; justify-content: flex-end; gap: 10px;
}
.qa-link{
  text-decoration: none; font-size: 18px; line-height: 1;
  padding: 8px; border-radius: 10px; color: var(--text);
  border: 1px solid transparent;
}
.qa-link:hover{ background: #0e141b; border-color: var(--border); }
.qa-link.active{ background: #122033; border-color: #274767; }

.app-shell{
  position: absolute;
  top: var(--nav-h);
  left: 0; right: 0; bottom: 0;
  display: grid;
  grid-template-columns: 280px minmax(0,1fr) 360px; /* más anchos */
  gap: 32px; /* más espacio entre columnas */
  padding: 24px 32px; /* más aire alrededor */
  max-width: 1400px;  /* el layout respira más */
  margin: 0 auto;
}


/* Sidebar izquierda */
.app-sidebar{
  position: sticky; top: calc(var(--gap));
  height: calc(100vh - var(--nav-h) - var(--gap)*2);
}
.sidebar{
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
}
.sidebar ul { list-style: none; margin: 0; padding: 0; }
.side-link{
  display: flex; align-items: center; gap: 10px;
  padding: 10px 12px; border-radius: 12px;
  color: var(--text); text-decoration: none; font-weight: 600;
}
.side-link:hover{ background: #0e141b; }
.side-link.active{ background: #122033; border: 1px solid #274767; }
.side-ico{ width: 22px; text-align: center; }

/* Contenido central (scrollea) */
.app-main{
  overflow: auto;
  padding:10px 24px;
  height: 660px;
  overflow: auto;
  border-radius: 3px;
}
.content-stack{
  display: grid; gap: var(--gap);

}
.content-stack > h2{
  margin: 0; font-size: 22px; letter-spacing: 0.2px;
}

/* Panel derecho */
.app-right{
  position: sticky; top: calc(var(--gap));
  height: calc(100vh - var(--nav-h) - var(--gap)*2);
}
.rightpanel{ display: grid; gap: var(--gap); }

.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
}
.card-title{ margin: 0 0 10px 0; font-size: 16px; }

.user-card{
  display: grid; grid-template-columns: 56px 1fr; gap: 12px; align-items: center;
}
.avatar{
  width: 56px; height: 56px; border-radius: 50%;
  display: grid; place-items: center; font-size: 26px;
  background: #0e141b; border: 1px solid var(--border);
}
.u-info .muted{ color: var(--muted); font-size: 13px; }
.u-bio{ margin: 8px 0 12px; color: #cdd7e6; font-size: 14px; }

.u-actions{ display: flex; gap: 8px; }
.btn{
  border: 1px solid var(--border); background: #0e141b;
  color: var(--text); border-radius: 10px; padding: 8px 12px;
  font-weight: 600; cursor: pointer;
}
.btn:hover{ background: #101a25; }
.btn-primary{
  background: var(--primary); border-color: #2c64d6; color: white;
}
.btn-primary:hover{ filter: brightness(0.95); }
.btn-ghost{
  background: transparent;
}
.btn-mini{
  padding: 6px 10px; font-size: 12px; border-radius: 999px;
}

.muted{ color: var(--muted); }

.list{ margin: 0; padding-left: 18px; }
.list li{ margin: 6px 0; }

.rec-list{ list-style: none; margin: 0; padding: 0; display: grid; gap: 10px; }
.rec-item{
  display: grid; grid-template-columns: 10px 1fr auto; gap: 10px; align-items: center;
}
.rec-dot{ width: 10px; height: 10px; border-radius: 50%; background: #53d07a; }

/* Responsivo */
@media (max-width: 1100px){
  .app-shell{
    grid-template-columns: 220px minmax(0,1fr) 280px;
  }
}
@media (max-width: 900px){
  .topnav-inner{
    grid-template-columns: 1fr minmax(200px, 1fr) 1fr;
  }
  .app-shell{
    grid-template-columns: 70px minmax(0,1fr) 260px;
  }
  .side-text{ display: none; }
}
@media (max-width: 720px){
  .app-shell{
    grid-template-columns: 1fr;
  }
  .app-sidebar, .app-right{
    display: none;
  }
  .topnav-inner{ gap: 8px; }
}





/* PostBox */
.postbox-form{
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.postbox-avatar{
  font-size: 28px;
  background: #0e141b;
  border: 1px solid var(--border);
  border-radius: 50%;
  width: 46px;
  height: 46px;
  display: grid;
  place-items: center;
  margin-bottom: -4px;
}

.postbox-input{
  width: 100%;
  min-height: 70px;
  resize: vertical;
  background: #0e141b;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  color: var(--text);
  font-size: 14px;
  outline: none;
}

.postbox-input::placeholder{
  color: var(--muted);
}

.postbox-actions{
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.postbox-icons{
  display: flex;
  gap: 8px;
}

.icon-btn{
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  padding: 6px;
  border-radius: 8px;
}
.icon-btn:hover{
  background: #101a25;
  color: var(--text);
}



/* ====== MENSAJES ====== */
.msg-shell{
  display: grid;
  grid-template-columns: 320px 1fr;
  height: calc(100vh - var(--nav-h) - var(--gap) * 2 - 8px);
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
}

/* Sidebar de conversaciones */
.msg-sidebar{
  background: #0f141b;
  min-width: 260px;
}
.msg-thread-list{
  overflow: auto;
  max-height: calc(100% - 60px);
}
.msg-thread-item{
  cursor: pointer;
  background: transparent;
  color: var(--text);
}
.msg-thread-item:hover{
  background: rgba(255,255,255,0.03);
}
.msg-thread-item.active{
  background: rgba(79, 140, 255, 0.12);
}
.msg-avatar{
  width: 40px; height: 40px; border-radius: 50%;
  display: grid; place-items: center; font-weight: 700;
  background: #0e141b; border: 1px solid var(--border);
}
.msg-avatar.online{ box-shadow: 0 0 0 2px #0e141b, 0 0 0 4px #22c55e55; }
.msg-name{ font-size: 14.5px; }
.msg-last{ font-size: 13px; white-space: nowrap; max-width: 180px; overflow: hidden; text-overflow: ellipsis; }

/* Chat */
.msg-chat{
  display: grid;
  grid-template-rows: auto 1fr auto;
  background: var(--card);
}
.msg-chat-header{
  padding: 12px 16px;
  display: flex; align-items: center; justify-content: space-between;
  background: #0f141b;
}
.msg-body{
  padding: 16px;
  color: white;
  overflow: auto;
  background:
    radial-gradient(800px 400px at 20% 10%, rgba(76,118,255,0.06), transparent 60%),
    radial-gradient(600px 300px at 90% 80%, rgba(83,208,122,0.06), transparent 60%);
}
.msg-row{ display: flex; margin: 6px 0; }
.msg-row.from-me{ justify-content: flex-end; }
.msg-row.from-them{ justify-content: flex-start; }

.msg-bubble{
  max-width: min(70%, 560px);
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: #101824;
}
.from-me .msg-bubble{
  background: linear-gradient(135deg, var(--primary), #7aa7ff);
  color: white; border-color: transparent;
}
.msg-text{ white-space: pre-wrap; }
.msg-time{ font-size: 11px; opacity: 0.8; margin-top: 4px; text-align: right; }

.msg-input{
  padding: 10px;
  background: #0f141b;
}
.msg-input .form-control{
  border-radius: 12px;
  min-height: 42px;
  resize: none;
}

/* Responsive */
@media (max-width: 980px){
  .msg-shell{
    grid-template-columns: 1fr;
  }
  .msg-sidebar{
    display: none; /* podrías luego hacerla deslizable */
  }
}



/* ====== FEED / POST ====== */
.feed-stack{ display: grid; gap: var(--gap); }

.feed-post-header{
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 8px;
}
.fp-user{ display: flex; align-items: center; gap: 10px; }
.fp-avatar{
  width: 42px; height: 42px; border-radius: 50%;
  display: grid; place-items: center; font-size: 22px;
  background: #0e141b; border: 1px solid var(--border);
}
.fp-name{ font-weight: 700; }
.fp-date{ font-size: 12px; color: var(--muted); }

.feed-post-text{
  white-space: pre-wrap; line-height: 1.6;
  margin: 8px 0 10px 0;
}

.feed-post-actions{
  display: flex; align-items: center; gap: 12px;
  padding: 6px 0 2px;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}
.fp-action{
  display: inline-flex; align-items: center; gap: 6px;
  background: transparent; border: 1px solid var(--border);
  color: var(--text); border-radius: 10px; padding: 6px 10px;
  cursor: pointer; font-weight: 600; font-size: 13px;
}
.fp-action:hover{ background: #101a25; }
.active-like{ background: rgba(79,140,255,0.15); border-color: #2c64d6; }
.active-dislike{ background: rgba(238,85,85,0.15); border-color: #b94b4b; }

.fp-comments-count{
  display: inline-flex; align-items: center; gap: 6px;
  color: var(--muted); margin-left: auto; margin-right: 4px;
  font-size: 13px; font-weight: 600;
}

/* Comentarios */
.fp-comments{ list-style: none; margin: 10px 0 0; padding: 0; display: grid; gap: 8px; }
.fp-comment{ display: grid; grid-template-columns: 32px 1fr; gap: 8px; }
.fp-comment-avatar{
  width: 32px; height: 32px; border-radius: 50%;
  background: #0e141b; border: 1px solid var(--border);
  display: grid; place-items: center; font-size: 14px;
}
.fp-comment-body{
  background: #0f1620; border: 1px solid var(--border);
  border-radius: 10px; padding: 8px 10px;
}
.fp-comment-header{
  display: flex; align-items: center; gap: 8px;
  font-size: 12px; color: var(--muted); margin-bottom: 2px;
}
.fp-comment-text{ font-size: 14px; color: var(--text); }

.fp-comment-form{
  margin-top: 10px; display: flex; gap: 8px;
}
.fp-comment-input{
  flex: 1; background: #0e141b; border: 1px solid var(--border);
  border-radius: 10px; color: var(--text); padding: 8px 10px; outline: none;
}

/* PostBox pequeños retoques */
.postbox-row{ display: grid; grid-template-columns: 46px 1fr; gap: 12px; align-items: start; }



/* Links a perfil */
.fp-link{
  color: var(--text);
  text-decoration: none;
}
.fp-link:hover{ text-decoration: underline; }

/* Comentarios */
.fp-comment-actions{ display:flex; gap:8px; margin-top:6px; }
.c-action{
  display:inline-flex; align-items:center; gap:6px;
  background: transparent; border: 1px solid var(--border);
  color: var(--text); border-radius: 10px; padding: 4px 8px;
  cursor: pointer; font-weight: 600; font-size: 12px;
}
.c-action:hover{ background: #101a25; }

/* Responder a */
.replying-pill{
  background: #0f1620; border: 1px solid var(--border);
  color: var(--text); border-radius: 999px;
  padding: 6px 10px; font-size: 12px; margin-bottom: 6px;
  display: inline-flex; align-items: center; gap: 8px;
}

/* Árbol de comentarios */
.fp-children{ list-style:none; margin:8px 0 0; padding:0; display:grid; gap:8px; }




/* ===== PostBox: grid de imágenes seleccionadas ===== */
.postbox-images-grid{
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
  gap: 10px;
}
.img-thumb{
  position: relative;
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  background: #0e141b;
  height: 110px;
}
.img-thumb img{
  width: 100%; height: 100%; object-fit: cover; display: block;
}
.img-remove{
  position: absolute; top: 6px; right: 6px;
  border: 0; border-radius: 50%;
  width: 26px; height: 26px;
  display: grid; place-items: center;
  background: rgba(0,0,0,0.5); color: #fff; cursor: pointer;
}

/* ===== Modal Emojis ===== */
.emoji-grid{
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 8px;
}
.emoji-btn{
  font-size: 20px; padding: 8px; background: transparent;
  border: 1px solid var(--border); border-radius: 10px; cursor: pointer;
}
.emoji-btn:hover{ background: #101a25; }

/* ===== Feed: galería de imágenes en la publicación ===== */
.feed-images-grid{
  margin-top: 8px;
  display: grid; gap: 8px;
  grid-template-columns: repeat(2, 1fr);
}
.feed-images-grid .feed-img{
  border: 1px solid var(--border);
  border-radius: 12px; overflow: hidden; background: #0e141b;
  max-height: 320px;
}
.feed-images-grid .feed-img img{
  width: 100%; height: 100%; object-fit: cover; display: block;
}
/* Si solo hay una imagen, usar una sola columna amplia */
.feed-images-grid .feed-img.one{
  grid-column: 1 / -1;
  max-height: 480px;
}

/* Botones fantasma del header de post (tres puntitos) */
.btn-ghost{
  background: transparent; border: 1px solid var(--border); color: var(--text);
  border-radius: 10px; padding: 6px 8px; cursor: pointer;
}
.btn-ghost.btn-sm{ padding: 4px 8px; font-size: 12px; }
.btn-ghost:hover{ background: #101a25; }



/* ===== PROFILE ===== */
.profile-cover{
  overflow: hidden;
  border-radius: 16px;
  border: 1px solid var(--border);
}
.cover-bg{
  position: relative;
  height: 160px;
  background: #0e141b;
  border-bottom: 1px solid var(--border);
}
.cover-gradient{
  width: 100%; height: 100%;
  background:
    radial-gradient(600px 260px at 20% 40%, rgba(106,167,255,0.18), transparent 60%),
    radial-gradient(600px 260px at 80% 60%, rgba(83,208,122,0.18), transparent 60%);
}
.profile-header{
  display: grid;
  grid-template-columns: 120px 1fr auto;
  gap: 16px;
  align-items: end;
  padding: 12px 16px;
  background: var(--card);
}
.profile-avatar{
  width: 96px; height: 96px; border-radius: 50%;
  margin-top: -60px;
  display: grid; place-items: center; font-size: 40px; font-weight: 700;
  background: #0e141b; border: 2px solid var(--border);
  box-shadow: 0 8px 24px rgba(0,0,0,0.25);
}
.profile-id h2{ font-size: 22px; }
.profile-actions{ display: flex; gap: 8px; align-items: center; }
.profile-meta{ padding: 0 16px 12px; background: var(--card); }
.profile-tabs{
  position: sticky; top: calc(var(--gap) + var(--nav-h));
  background: var(--panel);
  padding: 8px;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  display: flex; gap: 8px;
}
.tab-btn{
  background: transparent; border: 1px solid var(--border);
  color: var(--text); padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: 600;
}
.tab-btn.active, .tab-btn:hover{ background: #101a25; }

/* Photos grid */
.profile-photos-grid{
  display: grid; gap: 8px;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
}
.photo-cell{
  border: 1px solid var(--border);
  background: #0e141b; border-radius: 12px; overflow: hidden;
  height: 140px;
}
.photo-cell img{ width: 100%; height: 100%; object-fit: cover; }

/* Botón fantasma ya definido, se reutiliza */


/* ===== Avatar con marcos ===== */
.profile-avatar{
  width: 96px; height: 96px; border-radius: 50%;
  margin-top: -60px;
  display: grid; place-items: center; font-size: 40px; font-weight: 700;
  background: #0e141b; border: 2px solid var(--border);
  box-shadow: 0 8px 24px rgba(0,0,0,0.25);
  position: relative; overflow: hidden;
}
.profile-avatar img{
  width: 100%; height: 100%; object-fit: cover; border-radius: 50%;
}
.profile-avatar::before{
  content: ""; position: absolute; inset: -3px; border-radius: 50%;
  z-index: 0; opacity: 0; pointer-events: none;
}
.profile-avatar > *{ position: relative; z-index: 1; }

/* Marcos */
.frame-none::before{ opacity: 0; }
.frame-blue::before{
  opacity: 1; background: radial-gradient(closest-side, rgba(0,0,0,0) 70%, rgba(79,140,255,0.9) 74%, rgba(79,140,255,0.25));
}
.frame-gold::before{
  opacity: 1; background: radial-gradient(closest-side, rgba(0,0,0,0) 70%, #f4d06f 74%, rgba(244,208,111,0.25));
}
.frame-neon::before{
  opacity: 1; background: radial-gradient(closest-side, rgba(0,0,0,0) 70%, #8a5cf6 74%, rgba(138,92,246,0.35));
  box-shadow: 0 0 18px rgba(138,92,246,0.5);
}
.frame-rainbow::before{
  opacity: 1;
  background: conic-gradient(#ff4d4d, #ff8c1a, #ffd11a, #5cd65c, #4dc3ff, #b266ff, #ff4dff, #ff4d4d);
  -webkit-mask: radial-gradient(transparent 66%, #000 68%);
          mask: radial-gradient(transparent 66%, #000 68%);
}
.frame-flag::before{
  opacity: 1;
  background: conic-gradient(#ce1126 0 25%, #002d62 25% 50%, #ce1126 50% 75%, #002d62 75% 100%);
  -webkit-mask: radial-gradient(transparent 66%, #000 68%);
          mask: radial-gradient(transparent 66%, #000 68%);
}

/* Vista previa en modal */
.avatar-preview{
  width: 96px; height: 96px; border-radius: 50%;
  background: #0e141b; border: 2px solid var(--border); position: relative; overflow: hidden;
  display: grid; place-items: center;
}
.avatar-preview img{ width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
.avatar-preview::before{
  content: ""; position: absolute; inset: -3px; border-radius: 50%; z-index: 0; opacity: 0; pointer-events: none;
}
.avatar-preview > *{ position: relative; z-index: 1; }
.avatar-preview.frame-blue::before{ opacity: 1; background: radial-gradient(closest-side, rgba(0,0,0,0) 70%, rgba(79,140,255,0.9) 74%, rgba(79,140,255,0.25)); }
.avatar-preview.frame-gold::before{ opacity: 1; background: radial-gradient(closest-side, rgba(0,0,0,0) 70%, #f4d06f 74%, rgba(244,208,111,0.25)); }
.avatar-preview.frame-neon::before{ opacity: 1; background: radial-gradient(closest-side, rgba(0,0,0,0) 70%, #8a5cf6 74%, rgba(138,92,246,0.35)); box-shadow: 0 0 18px rgba(138,92,246,0.5); }
.avatar-preview.frame-rainbow::before{ opacity: 1; background: conic-gradient(#ff4d4d,#ff8c1a,#ffd11a,#5cd65c,#4dc3ff,#b266ff,#ff4dff,#ff4d4d); -webkit-mask: radial-gradient(transparent 66%, #000 68%); mask: radial-gradient(transparent 66%, #000 68%); }
.avatar-preview.frame-flag::before{ opacity: 1; background: conic-gradient(#ce1126 0 25%, #002d62 25% 50%, #ce1126 50% 75%, #002d62 75% 100%); -webkit-mask: radial-gradient(transparent 66%, #000 68%); mask: radial-gradient(transparent 66%, #000 68%); }

/* Picker de marcos */
.frame-picker{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}
.frame-chip{
  display: grid; grid-template-columns: 28px 1fr; align-items: center; gap: 8px;
  border: 1px solid var(--border); border-radius: 12px; padding: 8px 10px; cursor: pointer;
}
.frame-chip input{ display: none; }
.chip-ring{
  width: 24px; height: 24px; border-radius: 50%; background: #0e141b; position: relative; border: 2px solid var(--border);
}
.chip-ring::before{
  content: ""; position: absolute; inset: -3px; border-radius: 50%; opacity: 0.9;
}
.chip-ring.frame-blue::before{ background: radial-gradient(closest-side, transparent 68%, rgba(79,140,255,1) 74%); }
.chip-ring.frame-gold::before{ background: radial-gradient(closest-side, transparent 68%, #f4d06f 74%); }
.chip-ring.frame-neon::before{ background: radial-gradient(closest-side, transparent 68%, #8a5cf6 74%); }
.chip-ring.frame-rainbow::before{ background: conic-gradient(#ff4d4d,#ff8c1a,#ffd11a,#5cd65c,#4dc3ff,#b266ff,#ff4dff,#ff4d4d); -webkit-mask: radial-gradient(transparent 68%, #000 70%); mask: radial-gradient(transparent 68%, #000 70%); }
.chip-ring.frame-flag::before{ background: conic-gradient(#ce1126 0 25%, #002d62 25% 50%, #ce1126 50% 75%, #002d62 75% 100%); -webkit-mask: radial-gradient(transparent 68%, #000 70%); mask: radial-gradient(transparent 68%, #000 70%); }
.chip-label{ font-size: 13px; }






/* Crear grupo */
.grid-2{ display: grid; gap: 16px; grid-template-columns: 1fr 1fr; }
.group-img-preview{ width: 96px; height: 96px; border-radius: 12px; overflow: hidden; border:1px solid var(--border); background:#0e141b; }
.group-img-preview img{ width:100%; height:100%; object-fit:cover; }
.group-cover-preview{ width:100%; height:140px; border-radius: 12px; overflow:hidden; border:1px solid var(--border); background:#0e141b; }
.group-cover-preview img{ width:100%; height:100%; object-fit:cover; }

/* Detalle de grupo */
.group-cover{ height: 160px; background:#0e141b; border-bottom:1px solid var(--border); }
.group-cover img{ width:100%; height:100%; object-fit:cover; display:block; }
.cover-fallback{ width:100%; height:100%; background:
  radial-gradient(600px 260px at 20% 40%, rgba(106,167,255,0.18), transparent 60%),
  radial-gradient(600px 260px at 80% 60%, rgba(83,208,122,0.18), transparent 60%); }
.group-head{ display:flex; align-items:end; gap:12px; padding: 0 16px 12px; }
.group-avatar{ width:80px; height:80px; border-radius: 16px; margin-top:-40px; border:2px solid var(--border); background:#0e141b; overflow:hidden; display:grid; place-items:center; font-size:36px; }
.group-avatar img{ width:100%; height:100%; object-fit:cover; }
.avatar-fallback{ filter: grayscale(0.2); }

/* Responsive */
@media (max-width: 820px){
  .grid-2{ grid-template-columns: 1fr; }
}


/* ===== Grupos ===== */
.groups-grid{
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 12px;
}
.group-card{
  border: 1px solid var(--border);
  border-radius: 12px; overflow: hidden;
  background: var(--card);
}
.gc-cover{ height: 90px; background:#0e141b; border-bottom:1px solid var(--border); }
.gc-cover img{ width:100%; height:100%; object-fit:cover; display:block; }
.gc-body{ padding: 10px; display: grid; gap: 8px; }
.gc-head{ display: grid; grid-template-columns: 54px 1fr; gap: 10px; align-items: center; }
.gc-avatar{
  width:54px; height:54px; border-radius:12px; background:#0e141b; border:1px solid var(--border);
  display:grid; place-items:center; overflow:hidden; font-size:26px;
}
.gc-avatar img{ width:100%; height:100%; object-fit:cover; }
.gc-name{ font-weight:700; }
.gc-meta{ font-size:12px; color:var(--muted); display:flex; gap:6px; align-items:center; }
.gc-desc{ color:var(--text); opacity:0.9; font-size:14px; height:40px; overflow:hidden; text-overflow:ellipsis; }


/* Chip de contexto (post en grupo) */
.fp-context{
  margin-top: 2px;
  font-size: 12px;
  color: var(--muted);
}





/* ===== Strip superior tipo “estados” ===== */
.thread-strip{ overflow: hidden; }
.strip-tools{ display:flex; justify-content:flex-end; padding: 4px; }
.strip-search{ max-width: 320px; }
.strip-scroll{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(100px, 140px);
  gap: 8px;
  overflow-x: auto; padding: 6px 2px 8px;
  scrollbar-width: thin;
}
.thread-chip{
  position: relative;
  display: grid; justify-items: center; gap: 6px;
  background: transparent; border: 1px solid var(--border);
  border-radius: 12px; padding: 10px 8px; cursor: pointer;
  color: var(--text);
}
.thread-chip:hover{ background: #101a25; }
.thread-chip.active{
  background: rgba(79,140,255,0.12);
  border-color: #2c64d6;
}
.chip-avatar{
  width: 52px; height: 52px; border-radius: 50%;
  display:grid; place-items:center; font-weight:700;
  background: #0e141b; border: 2px solid var(--border);
  position: relative;
}
.chip-avatar.online{ box-shadow: 0 0 0 2px #0e141b, 0 0 0 4px #22c55e55; }
.chip-avatar.ring-unread{ box-shadow: 0 0 0 2px #0e141b, 0 0 0 4px rgba(79,140,255,0.45); }
.chip-avatar.ring-pinned{ outline: 2px solid rgba(250,204,21,0.55); outline-offset: 2px; }
.chip-name{
  max-width: 120px; text-align: center; font-size: 13px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.chip-badge{
  position: absolute; top: 6px; right: 6px;
  background: var(--primary); color: #fff; border-radius: 999px;
  font-size: 11px; line-height: 1; padding: 4px 6px;
}
.chip-pin{
  position: absolute; left: 6px; top: 6px; font-size: 14px; color: #facc15;
}

/* ===== Chat a pantalla completa ===== */
.msg-fullshell{
  height: calc(100vh - var(--nav-h) - var(--gap) * 3 - 8px);
  display: grid; grid-template-rows: auto 1fr auto;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px; overflow: hidden;
}
.msg-chat-header{
  padding: 12px 16px;
  display: flex; align-items: center; justify-content: space-between;
  background: #0f141b;
}
.msg-avatar{
  width: 40px; height: 40px; border-radius: 50%;
  display: grid; place-items: center; font-weight: 700;
  background: #0e141b; border: 1px solid var(--border);
}
.msg-avatar.online{ box-shadow: 0 0 0 2px #0e141b, 0 0 0 4px #22c55e55; }
.msg-body{
  padding: 16px;
  overflow: auto;
  background:
    radial-gradient(800px 400px at 20% 10%, rgba(76,118,255,0.06), transparent 60%),
    radial-gradient(600px 300px at 90% 80%, rgba(83,208,122,0.06), transparent 60%);
}
.msg-row{ display: flex; margin: 6px 0; }
.msg-row.from-me{ justify-content: flex-end; }
.msg-row.from-them{ justify-content: flex-start; }
.msg-bubble{
  max-width: min(70%, 560px);
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: #101824;
}
.from-me .msg-bubble{
  background: linear-gradient(135deg, var(--primary), #7aa7ff);
  color: white; border-color: transparent;
}
.msg-text{ white-space: pre-wrap; }
.msg-time{ font-size: 11px; opacity: 0.8; margin-top: 4px; text-align: right; }
.msg-input{
  padding: 10px;
  background: #0f141b;
}
.msg-input .form-control{
  border-radius: 12px; min-height: 42px; resize: none;
}

/* Responsive: el strip queda siempre visible */
@media (max-width: 720px){
  .strip-search{ max-width: 100%; }
  .strip-scroll{ grid-auto-columns: 110px; }
  .msg-fullshell{ height: calc(100vh - var(--nav-h) - var(--gap) * 4 - 8px); }
}



.feed-hidden{
  padding: 12px;
  display: flex; align-items: center; justify-content: space-between;
  border: 1px dashed var(--border);
  border-radius: 12px; background: #0f1620;
}



/* ===== Overlay de carga ===== */
.loader-overlay{
  position: absolute; inset: 0; z-index: 50;
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(2px);
  display: grid; place-items: center;
}
.loader-box{
  background: #0f141b; border: 1px solid var(--border);
  padding: 16px 18px; border-radius: 12px;
  display: grid; justify-items: center; gap: 10px;
}
.loader-label{ color: var(--text); font-weight: 600; }

/* ===== Spinner ===== */
.spinner{
  width: 24px; height: 24px; border-radius: 50%;
  border: 3px solid rgba(255,255,255,0.2);
  border-top-color: var(--primary, #4f8cff);
  animation: spin 0.9s linear infinite;
}
.spinner.inline{ display: inline-block; vertical-align: middle; margin-left: 8px; }
@keyframes spin{ to { transform: rotate(360deg); } }

/* ===== Skeleton ===== */
.skel-card{ position: relative; overflow: hidden; }
.skel-line, .skel-avatar, .skel-img{
  position: relative; overflow: hidden;
  background: #121b27; border-radius: 8px;
}
.skel-line{ height: 12px; margin: 8px 0; }
.skel-avatar{ width: 44px; height: 44px; border-radius: 50%; }
.skel-avatar.sm{ width: 32px; height: 32px; }
.skel-img{ height: 160px; margin-top: 10px; border-radius: 12px; }

.skel-row{ display: grid; grid-template-columns: auto 1fr; gap: 10px; align-items: center; }
.skel-col{ display: grid; gap: 8px; }
.gap{ margin-bottom: 8px; }

.w-25{ width: 25%; } .w-40{ width: 40%; } .w-60{ width: 60%; }
.w-70{ width: 70%; } .w-90{ width: 90%; } .w-100{ width: 100%; }

.skel-line::after, .skel-avatar::after, .skel-img::after{
  content: ""; position: absolute; inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.06), rgba(255,255,255,0));
  animation: shimmer 1.25s infinite;
}
@keyframes shimmer{ 100%{ transform: translateX(100%); } }

.skel-comment{
  display: grid; grid-template-columns: auto 1fr; gap: 10px; margin: 8px 0;
}




/* Tabs de settings */
.settings-tabs{
  display:flex; gap:8px; flex-wrap:wrap;
}
.tab-btn{
  padding:8px 12px; border:1px solid var(--border);
  border-radius:10px; background:#0f141b; color:var(--text);
}
.tab-btn.active{ border-color:#2c64d6; background:rgba(79,140,255,0.12); }

.grid-3{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px; }
.grid-2{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px; }
@media (max-width: 800px){
  .grid-3{ grid-template-columns: 1fr; }
  .grid-2{ grid-template-columns: 1fr; }
}

.kpibox{ background:#0f141b; border:1px solid var(--border); border-radius:12px; padding:12px; }
.kpi{ font-size:22px; font-weight:700; }
.kpi-label{ color:var(--muted); }

.terms-box{
  padding:12px; border:1px solid var(--border); border-radius:12px; background:#0f141b;
  max-height:320px; overflow:auto;
}

.codes-wrap{ display:flex; flex-wrap:wrap; gap:8px; }
.code-chip{
  background:#0f141b; border:1px dashed var(--border); border-radius:8px;
  padding:6px 8px; display:inline-block;
}

.pref-item{ padding:8px; border:1px solid var(--border); border-radius:10px; background:#0f141b; }





.games-grid{
  display:grid; 
  grid-template-columns: 1.25fr 0.75fr;
   gap: 12px;
}
.games-main > .card { margin-bottom: 12px; }
@media (max-width: 980px){
  .games-grid{ grid-template-columns: 1fr; }
}

/* Botones fantasma para tabs/acciones */
.btn-ghost{
  background: transparent; color: var(--text);
  border: 1px solid var(--border);
}
.btn-ghost:hover{ background: #0f1620; }

/* Badges */
.badge.text-bg-dark{
  background: #0f141b; border: 1px solid var(--border);
}

/* Para inputs pequeños en juegos */
.display-6 { font-size: 28px; }





/* ===== Games layout ===== */
.games-grid { 
  display: grid;
  grid-template-columns: 7fr; /* 2 columnas iguales */
  gap: 1rem;
    padding: 4px;
    }
.games-main > .card { margin-bottom: 12px; }
.cards-grid { display: grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap: 12px; }
@media (max-width: 980px){ .games-grid{ grid-template-columns:1fr; } .cards-grid{ grid-template-columns:1fr; } }

.games-top.card{
  display:flex; align-items:center; justify-content:space-between;
}
.coins, .score { background:#0f141b; color: gold; border:1px solid var(--border); border-radius:10px; padding:4px 10px; }

/* ===== Hearts ===== */
.hearts-card{ display:flex; align-items:center; justify-content:space-between; }
.heart{  width:22px;
  height:22px;
  color:#ef4444;          /* rojo */
  filter:none;            /* sin sombras */
  box-shadow:none;
margin: 5px;
 }
.heart.full{ filter: drop-shadow(0 0 6px rgba(239,68,68,.6)); }
.hearts-left{ display:flex; gap:6px; }
.hearts-right{ display:flex; align-items:center; }

/* ===== Game card ===== */
.game-card .game-card-head{ display:flex; gap:10px; align-items:center; }
.game-card .game-icon{ width:36px; height:36px; display:grid; place-items:center; font-size:20px; background:#0f141b; border:1px solid var(--border); border-radius:10px; }
.game-card .game-title{ font-weight:700; }
.game-card .game-desc{ color:var(--muted); font-size:12px; }

/* hover tilt */
.tilt{ transition: transform .18s ease, box-shadow .18s ease; }
.tilt:hover{ transform: translateY(-2px); box-shadow: 0 6px 24px rgba(0,0,0,.35); }

/* pulse btn */
.pulse{ animation: pulse 1.3s infinite; }
@keyframes pulse{
  0%{ transform: scale(1); } 50%{ transform: scale(1.03); } 100%{ transform: scale(1); }
}

/* progress striped */
.progress{ height: 10px; background:#0c1220; border:1px solid var(--border); border-radius: 999px; overflow:hidden; }
.progress-striped .progress-bar{
  height:100%; background: repeating-linear-gradient(45deg, #2c64d6, #2c64d6 12px, #3c75ea 12px, #3c75ea 24px);
  transition: width .35s ease;
}

/* runner header */
.runner-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.runner-head .game-icon{ width:40px; height:40px; display:grid; place-items:center; font-size:22px; background:#0f141b; border:1px solid var(--border); border-radius:10px; }
.runner-head .game-title{ font-weight:700; font-size:18px; }

/* coin pop animation */
.coin-pop{ animation: coinPop .6s ease; }
@keyframes coinPop{
  0%{ transform: translateY(6px) scale(.96); opacity:0; }
  60%{ transform: translateY(-2px) scale(1.02); opacity:1; }
  100%{ transform: translateY(0) scale(1); }
}

/* options */
.option{ border:1px solid var(--border); border-radius:10px; padding:8px; cursor:pointer; }
.option.selected{ border-color:#3c75ea; background:rgba(79,140,255,.12); }

/* sequence pads */
.pads{ display:grid; grid-template-columns: repeat(2, 1fr); gap:10px; margin-top:8px; }
.pad{
  border:none; height:70px; border-radius:14px; opacity:.9; transition: transform .08s ease, filter .08s ease;
}
.pad:hover{ transform: translateY(-1px); filter: brightness(1.07); }
.pad.blink{ box-shadow: 0 0 14px rgba(255,255,255,.6); filter: brightness(1.25); }

/* reaction */
.reaction .reaction-box{
  display:grid; place-items:center; height:120px; border:1px dashed var(--border); border-radius:12px; background:#0f141b;
}
.reaction.waiting .reaction-box{ animation: shimmerBg 1.1s infinite linear; }
.reaction .reaction-box.go{ background:#0c3; color:#021; font-weight:800; }
@keyframes shimmerBg{
  0%{ background: #0f141b; } 50%{ background: #121b26; } 100%{ background: #0f141b; }
}

/* scramble word */
.scramble{ font-weight:700; font-size:22px; letter-spacing:2px; margin-bottom:8px; }


.card-title{
  color: white;
}


.btn-outline-danger.btn-sm {
  border-color: #ef4444;
  color: #ef4444;
}
.btn-outline-danger.btn-sm:hover {
  background: rgba(239,68,68,.12);
}



.rightpanel-stack{

  padding: 3px;
  height: 700px;
  overflow: auto;
}


.rightpanel-stack .card { margin-bottom: 12px; }

/* Avatar redondo */
.rp-avatar{
  width:36px; height:36px; border-radius:50%;
  background:#0f141b; border:1px solid var(--border);
  display:grid; place-items:center; overflow:hidden;
}
.rp-avatar img{ width:100%; height:100%; object-fit:cover; border-radius:50%; }

/* Listas */
.rp-list{ display:flex; flex-direction:column; gap:10px; }
.rp-row{ display:flex; gap:10px; }
.rp-main{ flex:1; }

/* Tendencias */
.rp-row.trend .rp-hash{
  width:36px; height:36px; display:grid; place-items:center;
  background:#0f141b; border:1px solid var(--border); border-radius:10px;
}
.btn-as-link{ background:none; border:none; padding:0; }

/* Undo bar */
.rp-undo{ margin-top:6px; display:flex; justify-content:flex-end; }

/* Online */
.rp-online-grid{ display:grid; grid-template-columns:1fr; gap:6px; }
.rp-online{
  display:flex; align-items:center; gap:8px;
  background:#0f141b; border:1px solid var(--border);
  border-radius:10px; padding:6px 8px;
}
.rp-online .dot{
  width:8px; height:8px; border-radius:50%; background:#22c55e;
  box-shadow:0 0 0 3px rgba(34,197,94,.15);
}
.rp-online .avatar{ width:20px; display:inline-grid; place-items:center; }

/* Shimmer */
.shimmer-wrap{ display:grid; gap:8px; }
.shimmer-line{
  height:12px; border-radius:8px;
  background: linear-gradient(90deg, #131a25 0%, #1a2230 50%, #131a25 100%);
  background-size: 200% 100%;
  animation: shimmer 1.2s infinite linear;
}
@keyframes shimmer { 0%{background-position:0% 0;} 100%{background-position:-200% 0;} }

/* Dark badges */
.badge.text-bg-dark{
  background:#0f141b; border:1px solid var(--border);
}

/* Títulos de card */
.card-title{ font-size:15px; font-weight:700; }



/* Avatar con marco dinámico */
.rp-avatar{
  width:40px; height:40px; border-radius:50%;
  background:#0f141b; border:1px solid var(--border);
  display:grid; place-items:center; overflow:hidden;
}
.rp-avatar img{ width:100%; height:100%; object-fit:cover; border-radius:50%; }

/* Marcos (ajusta a gusto) */
.rp-frame-gold { box-shadow: 0 0 0 2px #d4af37 inset; border-color: #d4af37; }
.rp-frame-neon { box-shadow: 0 0 0 2px #7c3aed inset; border-color: #7c3aed; }
.rp-frame-rainbow {
  border-color: transparent;
  background:
    linear-gradient(#0f141b, #0f141b) padding-box,
    conic-gradient(#f87171,#fbbf24,#34d399,#60a5fa,#a78bfa,#f87171) border-box;
  border: 2px solid transparent;
}

/* Stats compactas */
.rp-stats{
  display:flex; flex-wrap:wrap; gap:6px;
}




.cards-grid{
  display:grid; gap:12px;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
}
.store-icon{
  width:42px; height:42px; display:grid; place-items:center;
  border:1px solid var(--border); border-radius:12px; background:#0f141b;
  font-size:20px;
}
.toast-like{
  position: fixed; right: 16px; bottom: 16px;
  background:#0f141b; color: var(--text);
  border:1px solid var(--border); border-radius:12px;
  padding:10px 12px; animation: toastIn 2.2s ease both;
}
@keyframes toastIn{
  0%{ transform: translateY(12px); opacity:0; }
  10%{ transform: translateY(0); opacity:1; }
  80%{ opacity:1; }
  100%{ transform: translateY(12px); opacity:0; }
}



.story-toolbar{
  display:flex; justify-content:space-between; align-items:center;
  gap:10px; padding:8px; border:1px solid var(--border); border-radius:12px; background:#0b1118;
}
.story-toolbar .tb-btn{ border:1px solid var(--border); background:#0f141b; padding:6px 8px; border-radius:8px; }
.story-toolbar .tb-btn:hover{ transform: translateY(-1px); }
.story-toolbar .tb-sep{ width:1px; height:24px; background:var(--border); margin:0 6px; }
.story-toolbar .tb-field{ display:flex; align-items:center; gap:8px; }

.story-editor .story-title-input{ font-size:20px; font-weight:600; }
.story-content{
  min-height:360px; padding:16px; margin-top:10px;
  border:1px dashed var(--border); border-radius:12px; background:#0b1118;
}
.story-content:focus{ outline: none; border-style: solid; }

.story-preview{
  max-height:160px; overflow:hidden; border-top:1px dashed var(--border); margin-top:8px; padding-top:8px;
}

.story-public .story-title{ margin:0 0 8px 0; }

/* buscador */
.rp-search-wrap{
  gap:8px; padding:4px 8px; border:1px solid var(--border); border-radius:8px;
  background:#0b1118;
}


/* Texto blanco en el editor / vista pública */
.story-content { color: #fff; }
.story-public .story-title { margin:0 0 8px 0; color:#fff; }



/* Contenedor único: ocupa mucho más espacio */
.chat-full{
  display:flex; flex-direction:column;
  min-height: calc(100vh - 140px);
  padding: 14px;
  background: radial-gradient(1200px 600px at 10% -20%, rgba(56,189,248,.06), transparent),
              linear-gradient(180deg, rgba(20,30,48,.65), rgba(13,19,32,.65));
  border:1px solid rgba(255,255,255,.08);
  backdrop-filter: blur(6px);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

/* Área de mensajes */
.messages{
  flex:1; overflow:auto; padding:14px;
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px; margin-bottom:12px;
  background: linear-gradient(180deg, #0b1118, #0d121a);
  animation: fade-in .35s ease;
}
.empty-hint{ color:#9aa4b2; text-align:center; margin-top:10vh; }
@keyframes fade-in{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)} }

/* Burbujas */
.msg-row{ display:flex; margin-bottom:12px; animation: bubble-in .22s ease; }
.msg-row.me{ justify-content:flex-end; }
@keyframes bubble-in{ from{opacity:0; transform:translateY(6px) scale(.98)} to{opacity:1; transform:translateY(0) scale(1)} }

.bubble{
  max-width:78%; padding:12px 14px; border-radius:16px;
  background: #142033;
  border:1px solid rgba(255,255,255,.08);
  color:#fff;                      /* TEXTO BLANCO */
  box-shadow: 0 4px 14px rgba(0,0,0,.25);
}
.msg-row.me .bubble{ background:#17314f; }
.bubble .meta{ font-size:12px; color:#9AA4B2; margin-bottom:6px; }
.bubble .content{ white-space:pre-wrap; line-height:1.5; }

/* "Escribiendo…" (tres puntos) */
.bubble.typing{ display:flex; align-items:center; justify-content:flex-start; }
.dots{ display:inline-flex; gap:6px; }
.dots span{
  width:8px; height:8px; border-radius:50%;
  background:#c7d2fe; opacity:.6; animation: dot 1.2s infinite ease-in-out;
}
.dots span:nth-child(2){ animation-delay: .15s; }
.dots span:nth-child(3){ animation-delay: .3s; }
@keyframes dot{
  0%, 80%, 100% { transform: translateY(0); opacity:.5; }
  40% { transform: translateY(-4px); opacity:1; }
}

/* Composer */
.composer{ display:flex; gap:10px; }
.chat-input{
  background: #0f1724 !important; color:#fff !important;
  border:1px solid rgba(255,255,255,.12) !important;
  border-radius:12px; height:52px; padding:0 14px;
  box-shadow: inset 0 0 0 0 rgba(34,211,238,.35);
  transition: box-shadow .25s ease, border-color .25s ease;
}
.chat-input:focus{
  border-color: rgba(34,211,238,.55) !important;
  box-shadow: 0 0 0 4px rgba(34,211,238,.12);
}
.chat-send{
  height:52px; border-radius:12px;
  box-shadow: 0 10px 18px rgba(34,211,238,.18);
  transform: translateZ(0);
  transition: transform .08s ease, box-shadow .25s ease;
}
.chat-send:active{ transform: scale(.98); }
